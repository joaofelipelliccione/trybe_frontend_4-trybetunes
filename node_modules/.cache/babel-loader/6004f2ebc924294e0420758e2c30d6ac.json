{"ast":null,"code":"import _regeneratorRuntime from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect}from'react-router-dom';import Footer from'../components/Footer';import{createUser}from'../services/userAPI';import logo from'../images/trybetunesLogo.png';import'../styles/Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.onInputChange=function(_ref){var target=_ref.target;// Função que altera o valor de qualquer estado, sempre que um input for realizado no elemento onde ela está sendo chamada. || OBS: Para que tal função funcione, os 'name' de cada um dos elementos do Forms devem ser iguais ao nome dos estados.\nvar name=target.name;var formElementValue=target.type==='checkbox'?target.checked:target.value;_this.setState(_defineProperty({},name,formElementValue));};_this.onRegisterClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Engloba, entre outras coisas, a função assíncrona createUser(). Essa última, simula uma requisição de criação de cadastro.\nusername=_this.state.username;_this.setState({loading:true});_context.next=4;return createUser({name:username});case 4:// Salva as informações do usuário, no local storage.\n_this.setState({loading:false,redirectToSearch:true});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.registerWithEnter=function(e){// Permite fazer o login pressionando a tecla Enter.\ne.preventDefault();_this.onRegisterClick();};_this.state={username:'',loading:false,redirectToSearch:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,username=_this$state.username,loading=_this$state.loading,redirectToSearch=_this$state.redirectToSearch;var numOfCharacters=3;// O React pede para que declare uma constante, ao invés de utilizar o número na condicional.\n// A mensagem \"Carregando\", contida no componente React de classe Loading, será renderizada quando o estado \"loading\" for true.\nif(loading){return/*#__PURE__*/_jsx(\"span\",{id:\"enteringMessage\",children:\"Entrando...\"});}// O usuário será redirecionado para o path \"/search\" após se cadastrar na plataforma, ou seja, quando o estado \"redirectToSearch\" for true.\nif(redirectToSearch){return/*#__PURE__*/_jsx(Redirect,{to:\"/search\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"main\",{\"data-testid\":\"page-login\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"trybetunes-logo\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-name-input\",children:/*#__PURE__*/_jsx(\"input\",{id:\"login-name-input\",\"data-testid\":\"login-name-input\",type:\"text\",name:\"username\",value:username,onChange:this.onInputChange,onKeyPress:function onKeyPress(event){return event.key==='Enter'&&_this2.registerWithEnter(event);},placeholder:\"Nome\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"login-button\",\"data-testid\":\"login-submit-button\",type:\"button\",disabled:username.length<numOfCharacters// O botão só será habilitado quando o estado 'username' tiver 3 caracteres ou mais.\n,onClick:this.onRegisterClick,children:\"Entrar\"})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/src/pages/Login.jsx"],"names":["React","Redirect","Footer","createUser","logo","Login","onInputChange","target","name","formElementValue","type","checked","value","setState","onRegisterClick","username","state","loading","redirectToSearch","registerWithEnter","e","preventDefault","numOfCharacters","event","key","length","Component"],"mappings":"s6CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,MAAO,qBAAP,C,2FAEMC,CAAAA,K,0GACJ,gBAAc,uCACZ,wBADY,MAUdC,aAVc,CAUE,cAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CAAE;AAChC,GAAQC,CAAAA,IAAR,CAAiBD,MAAjB,CAAQC,IAAR,CACA,GAAMC,CAAAA,gBAAgB,CAAGF,MAAM,CAACG,IAAP,GAAgB,UAAhB,CAA6BH,MAAM,CAACI,OAApC,CAA8CJ,MAAM,CAACK,KAA9E,CAEA,MAAKC,QAAL,oBAAiBL,IAAjB,CAAwBC,gBAAxB,GACD,CAfa,OAiBdK,eAjBc,sEAiBI,gJAAc;AACtBC,QADQ,CACK,MAAKC,KADV,CACRD,QADQ,CAEhB,MAAKF,QAAL,CAAc,CAAEI,OAAO,CAAE,IAAX,CAAd,EAFgB,sBAIVd,CAAAA,UAAU,CAAC,CAAEK,IAAI,CAAEO,QAAR,CAAD,CAJA,QAIsB;AAEtC,MAAKF,QAAL,CAAc,CACZI,OAAO,CAAE,KADG,CAEZC,gBAAgB,CAAE,IAFN,CAAd,EANgB,sDAjBJ,SA6BdC,iBA7Bc,CA6BM,SAACC,CAAD,CAAO,CAAE;AAC3BA,CAAC,CAACC,cAAF,GACA,MAAKP,eAAL,GACD,CAhCa,CAGZ,MAAKE,KAAL,CAAa,CACXD,QAAQ,CAAE,EADC,CAEXE,OAAO,CAAE,KAFE,CAGXC,gBAAgB,CAAE,KAHP,CAAb,CAHY,aAQb,C,wCA0BD,iBAAS,iBACP,gBAAgD,KAAKF,KAArD,CAAQD,QAAR,aAAQA,QAAR,CAAkBE,OAAlB,aAAkBA,OAAlB,CAA2BC,gBAA3B,aAA2BA,gBAA3B,CACA,GAAMI,CAAAA,eAAe,CAAG,CAAxB,CAA2B;AAE3B;AACA,GAAIL,OAAJ,CAAa,CACX,mBAAQ,aAAM,EAAE,CAAC,iBAAT,yBAAR,CACD,CAED;AACA,GAAIC,gBAAJ,CAAsB,CACpB,mBAAQ,KAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAR,CACD,CAED,mBACE,oCACE,cAAM,cAAY,YAAlB,wBACE,YAAK,GAAG,CAAEd,IAAV,CAAgB,GAAG,CAAC,iBAApB,EADF,cAEE,qCACE,cAAO,OAAO,CAAC,kBAAf,uBACE,cACE,EAAE,CAAC,kBADL,CAEE,cAAY,kBAFd,CAGE,IAAI,CAAC,MAHP,CAIE,IAAI,CAAC,UAJP,CAKE,KAAK,CAAGW,QALV,CAME,QAAQ,CAAG,KAAKT,aANlB,CAOE,UAAU,CAAG,oBAACiB,KAAD,QAAWA,CAAAA,KAAK,CAACC,GAAN,GAAc,OAAd,EAAyB,MAAI,CAACL,iBAAL,CAAuBI,KAAvB,CAApC,EAPf,CAQE,WAAW,CAAC,MARd,EADF,EADF,cAaE,aAbF,cAcE,eACE,EAAE,CAAC,cADL,CAEE,cAAY,qBAFd,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAGR,QAAQ,CAACU,MAAT,CAAkBH,eAAkB;AAJjD,CAKE,OAAO,CAAG,KAAKR,eALjB,oBAdF,GAFF,GADF,cA4BE,KAAC,MAAD,IA5BF,GADF,CAgCD,C,mBAjFiBd,KAAK,CAAC0B,S,EAoF1B,cAAerB,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Footer from '../components/Footer';\nimport { createUser } from '../services/userAPI';\nimport logo from '../images/trybetunesLogo.png'\nimport '../styles/Login.css';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      username: '',\n      loading: false,\n      redirectToSearch: false,\n    };\n  }\n\n  onInputChange = ({ target }) => { // Função que altera o valor de qualquer estado, sempre que um input for realizado no elemento onde ela está sendo chamada. || OBS: Para que tal função funcione, os 'name' de cada um dos elementos do Forms devem ser iguais ao nome dos estados.\n    const { name } = target;\n    const formElementValue = target.type === 'checkbox' ? target.checked : target.value;\n\n    this.setState({ [name]: formElementValue });\n  }\n\n  onRegisterClick = async () => { // Engloba, entre outras coisas, a função assíncrona createUser(). Essa última, simula uma requisição de criação de cadastro.\n    const { username } = this.state;\n    this.setState({ loading: true });\n\n    await createUser({ name: username }); // Salva as informações do usuário, no local storage.\n\n    this.setState({\n      loading: false,\n      redirectToSearch: true,\n    });\n  }\n\n  registerWithEnter = (e) => { // Permite fazer o login pressionando a tecla Enter.\n    e.preventDefault();\n    this.onRegisterClick();\n  }\n\n  render() {\n    const { username, loading, redirectToSearch } = this.state;\n    const numOfCharacters = 3; // O React pede para que declare uma constante, ao invés de utilizar o número na condicional.\n\n    // A mensagem \"Carregando\", contida no componente React de classe Loading, será renderizada quando o estado \"loading\" for true.\n    if (loading) {\n      return (<span id=\"enteringMessage\">Entrando...</span>);\n    }\n\n    // O usuário será redirecionado para o path \"/search\" após se cadastrar na plataforma, ou seja, quando o estado \"redirectToSearch\" for true.\n    if (redirectToSearch) {\n      return (<Redirect to=\"/search\" />);\n    }\n\n    return (\n      <div>\n        <main data-testid=\"page-login\">\n          <img src={logo} alt=\"trybetunes-logo\" />\n          <form>\n            <label htmlFor=\"login-name-input\">\n              <input\n                id=\"login-name-input\"\n                data-testid=\"login-name-input\"\n                type=\"text\"\n                name=\"username\"\n                value={ username }\n                onChange={ this.onInputChange }\n                onKeyPress={ (event) => event.key === 'Enter' && this.registerWithEnter(event) }\n                placeholder=\"Nome\"\n              />\n            </label>\n            <br />\n            <button\n              id=\"login-button\"\n              data-testid=\"login-submit-button\"\n              type=\"button\"\n              disabled={ username.length < numOfCharacters } // O botão só será habilitado quando o estado 'username' tiver 3 caracteres ou mais.\n              onClick={ this.onRegisterClick }\n            >\n              Entrar\n            </button>\n          </form>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}