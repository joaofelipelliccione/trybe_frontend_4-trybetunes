{"ast":null,"code":"import _regeneratorRuntime from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import Header from'../components/Header';import searchAlbumsAPI from'../services/searchAlbumsAPI';import'../styles/Search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);_this=_super.call(this);_this.onInputChange=function(_ref){var target=_ref.target;// Função que altera o valor de qualquer estado, sempre que um input for realizado no elemento onde ela está sendo chamada. || OBS: Para que tal função funcione, os 'name' de cada um dos elementos do Forms devem ser iguais ao nome dos estados.\nvar name=target.name;var formElementValue=target.type==='checkbox'?target.checked:target.value;_this.setState(_defineProperty({},name,formElementValue));};_this.onSearchClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userSearch,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Engloba, entre outras coisas, a função assíncrona searchAlbumsAPI(). Essa última, realiza uma requisição para a API do Itunes que retorna um array de objetos onde, cada objeto, diz respeito à um álbum musical de um determinado artista.\nuserSearch=_this.state.userSearch;_this.setState({loading:true,lastSearchedArtist:userSearch,userSearch:''});_context.next=4;return searchAlbumsAPI(userSearch);case 4:response=_context.sent;_this.setState({albuns:response,loading:false});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.searchWithEnter=function(e){// Permite pesquisar pressionando a tecla Enter.\ne.preventDefault();_this.onSearchClick();};_this.displaySearchBar=function(){// Função que retorna os elementos HTML para que o usuário consiga pesquisar um determinado artista.\nvar userSearch=_this.state.userSearch;var numOfCharacters=2;return/*#__PURE__*/_jsxs(\"form\",{id:\"searchArtistForm\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"searchBar\",\"data-testid\":\"search-artist-input\",type:\"text\",name:\"userSearch\",value:userSearch,onChange:_this.onInputChange,onKeyPress:function onKeyPress(event){return event.key==='Enter'&&_this.searchWithEnter(event);},placeholder:\"Nome do Artista ou do \\xC1lbum\"}),/*#__PURE__*/_jsx(\"button\",{id:\"search-button\",\"data-testid\":\"search-artist-button\",type:\"button\",disabled:userSearch.length<numOfCharacters// O botão só será habilitado quando o estado 'username' tiver 3 caracteres ou mais.\n,onClick:_this.onSearchClick,children:\"\\uD83D\\uDD0E\"})]});};_this.displayAlbuns=function(){// Função que retorna o elemento HTML a ser renderizado quando o artista pesquisado apresenta álbuns.\nvar _this$state=_this.state,lastSearchedArtist=_this$state.lastSearchedArtist,albuns=_this$state.albuns;return/*#__PURE__*/_jsxs(\"div\",{id:\"apiResultContainer2\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Retorno da pesquisa por: \".concat(lastSearchedArtist)}),/*#__PURE__*/_jsx(\"div\",{id:\"albunsContainer\",children:albuns.map(function(_ref3){var collectionId=_ref3.collectionId,artworkUrl100=_ref3.artworkUrl100,collectionName=_ref3.collectionName,artistName=_ref3.artistName;return/*#__PURE__*/_jsxs(\"div\",{id:\"eachAlbum\",children:[/*#__PURE__*/_jsx(\"img\",{src:artworkUrl100,alt:collectionName}),/*#__PURE__*/_jsx(\"p\",{children:collectionName}),/*#__PURE__*/_jsx(\"p\",{children:artistName}),/*#__PURE__*/_jsx(Link,{to:\"/trybe_frontend_4-trybetunes/album/\".concat(collectionId),\"data-testid\":\"link-to-album-\".concat(collectionId),children:/*#__PURE__*/_jsx(\"span\",{children:\"Abrir \\xC1lbum\"})})]},collectionId);})})]});};_this.displayWarning=function(){return/*#__PURE__*/ (// Função que retorna o elemento HTML a ser renderizado quando o artista pesquisado não é achado.\n_jsx(\"section\",{id:\"apiResultContainer2\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Nenhum \\xE1lbum foi encontrado at\\xE9 agora...\"})}));};_this.state={loading:false,userSearch:'',lastSearchedArtist:'',albuns:[]};return _this;}_createClass(Search,[{key:\"render\",value:function render(){var _this$state2=this.state,loading=_this$state2.loading,albuns=_this$state2.albuns;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-search\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{id:\"searchPageMain\",children:[/*#__PURE__*/_jsx(\"section\",{id:\"searchBarContainer\",children:loading?/*#__PURE__*/_jsx(\"span\",{children:\"Carregando...\"}):this.displaySearchBar()}),/*#__PURE__*/_jsx(\"section\",{id:\"apiResultContainer\",children:albuns.length>0?this.displayAlbuns():this.displayWarning()})]})]});}}]);return Search;}(React.Component);export default Search;","map":{"version":3,"sources":["/home/joaofelipe/joaofelipelliccione_projetos-trybe/2-Frontend/trybe_frontend_4-trybetunes/src/pages/Search.jsx"],"names":["React","Link","Header","searchAlbumsAPI","Search","onInputChange","target","name","formElementValue","type","checked","value","setState","onSearchClick","userSearch","state","loading","lastSearchedArtist","response","albuns","searchWithEnter","e","preventDefault","displaySearchBar","numOfCharacters","event","key","length","displayAlbuns","map","collectionId","artworkUrl100","collectionName","artistName","displayWarning","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport '../styles/Search.css';\n\nclass Search extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      userSearch: '',\n      lastSearchedArtist: '',\n      albuns: [],\n    };\n  }\n\n  onInputChange = ({ target }) => { // Função que altera o valor de qualquer estado, sempre que um input for realizado no elemento onde ela está sendo chamada. || OBS: Para que tal função funcione, os 'name' de cada um dos elementos do Forms devem ser iguais ao nome dos estados.\n    const { name } = target;\n    const formElementValue = target.type === 'checkbox' ? target.checked : target.value;\n\n    this.setState({ [name]: formElementValue });\n  }\n\n  onSearchClick = async () => { // Engloba, entre outras coisas, a função assíncrona searchAlbumsAPI(). Essa última, realiza uma requisição para a API do Itunes que retorna um array de objetos onde, cada objeto, diz respeito à um álbum musical de um determinado artista.\n    const { userSearch } = this.state;\n\n    this.setState({\n      loading: true,\n      lastSearchedArtist: userSearch,\n      userSearch: '',\n    });\n\n    const response = await searchAlbumsAPI(userSearch);\n\n    this.setState({\n      albuns: response,\n      loading: false,\n    });\n  }\n\n  searchWithEnter = (e) => { // Permite pesquisar pressionando a tecla Enter.\n    e.preventDefault();\n    this.onSearchClick();\n  }\n\n  displaySearchBar = () => { // Função que retorna os elementos HTML para que o usuário consiga pesquisar um determinado artista.\n    const { userSearch } = this.state;\n    const numOfCharacters = 2;\n\n    return (\n      <form id=\"searchArtistForm\">\n        <input\n          id=\"searchBar\"\n          data-testid=\"search-artist-input\"\n          type=\"text\"\n          name=\"userSearch\"\n          value={ userSearch }\n          onChange={ this.onInputChange }\n          onKeyPress={ (event) => event.key === 'Enter' && this.searchWithEnter(event) }\n          placeholder=\"Nome do Artista ou do Álbum\"\n        />\n        <button\n          id=\"search-button\"\n          data-testid=\"search-artist-button\"\n          type=\"button\"\n          disabled={ userSearch.length < numOfCharacters } // O botão só será habilitado quando o estado 'username' tiver 3 caracteres ou mais.\n          onClick={ this.onSearchClick }\n        >\n          🔎\n        </button>\n      </form>\n    );\n  }\n\n  displayAlbuns = () => { // Função que retorna o elemento HTML a ser renderizado quando o artista pesquisado apresenta álbuns.\n    const { lastSearchedArtist, albuns } = this.state;\n\n    return (\n      <div id=\"apiResultContainer2\">\n        <h3>{`Retorno da pesquisa por: ${lastSearchedArtist}`}</h3>\n        <div id=\"albunsContainer\">\n          {albuns.map(({ collectionId, artworkUrl100, collectionName, artistName }) => (\n            <div id=\"eachAlbum\" key={ collectionId }>\n              <img src={ artworkUrl100 } alt={ collectionName } />\n              <p>{ collectionName }</p>\n              <p>{ artistName }</p>\n              <Link\n                to={ `/trybe_frontend_4-trybetunes/album/${collectionId}` }\n                data-testid={ `link-to-album-${collectionId}` }\n              >\n                <span>Abrir Álbum</span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  displayWarning = () => ( // Função que retorna o elemento HTML a ser renderizado quando o artista pesquisado não é achado.\n    <section id=\"apiResultContainer2\">\n      {}\n      <h3>Nenhum álbum foi encontrado até agora...</h3>\n    </section>\n  );\n\n  render() {\n    const { loading, albuns } = this.state;\n\n    return (\n      <div data-testid=\"page-search\">\n        <Header />\n        <main id=\"searchPageMain\">\n          <section id=\"searchBarContainer\">\n            { loading ? <span>Carregando...</span> : this.displaySearchBar() }\n          </section>\n          <section id=\"apiResultContainer\">\n            { albuns.length > 0 ? this.displayAlbuns() : this.displayWarning() }\n          </section>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}