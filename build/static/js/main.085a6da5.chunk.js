(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(21),i=n.n(c),s=(n(29),n(16)),o=n(3),u=n(4),l=n(6),d=n(5),b=n(13),j=n(7),h=n(2),f=n.n(h),p=n(8),m="user",O=function(e){return localStorage.setItem(m,JSON.stringify(e))},v=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},x=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(m));null===t&&(t={}),v(t)(e)}))},g=function(e){return new Promise((function(t){O(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),e)),v("OK")(t)}))},k=n.p+"static/media/trybetunesLogoWhite.7907a040.png",y=(n(31),n(0)),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getUserInfo=Object(p.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,x();case 3:n=t.sent,r=n.name,e.setState({loading:!1,username:r});case 6:case"end":return t.stop()}}),t)}))),e.state={loading:!1,username:""},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state.loading;return Object(y.jsxs)("header",{"data-testid":"header-component",children:[Object(y.jsxs)("div",{id:"logoAndUserBar",children:[Object(y.jsx)("img",{src:k,alt:"trybetunes-logo"}),Object(y.jsx)(b.b,{to:"/trybe_frontend_4-trybetunes/","data-testid":"header-user-name",children:"Sair"})]}),Object(y.jsxs)("div",{id:"linksBar",children:[Object(y.jsx)(b.b,{to:"/trybe_frontend_4-trybetunes/search","data-testid":"link-to-search",children:"Pesquisa"}),Object(y.jsx)(b.b,{to:"/trybe_frontend_4-trybetunes/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(y.jsx)(b.b,{to:"/trybe_frontend_4-trybetunes/profile","data-testid":"link-to-profile",children:"Perfil"})]}),e&&Object(y.jsx)("div",{id:"loadingContainer",children:Object(y.jsx)("span",{children:"Carregando..."})})]})}}]),n}(a.a.Component),I=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"),{mode:"cors",method:"post",headers:{"access-control-allow-origin":"http://localhost:3000"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=I,w=n(24),_="favorite_songs";JSON.parse(localStorage.getItem(_))||localStorage.setItem(_,JSON.stringify([]));var N=function(){return JSON.parse(localStorage.getItem(_))},P=function(e){return localStorage.setItem(_,JSON.stringify(e))},F=function(e){return function(t){setTimeout((function(){t(e)}),500)}},A=function(){return new Promise((function(e){var t=N();F(t)(e)}))},M=function(e){return new Promise((function(t){if(e){var n=N();P([].concat(Object(w.a)(n),[e]))}F("OK")(t)}))},U=function(e){return new Promise((function(t){var n=N();P(n.filter((function(t){return t.trackId!==e.trackId}))),F("OK")(t)}))},D=(n(41),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).recoverFavorites=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,A();case 3:n=t.sent,e.setState({loading:!1,favoriteSongs:n});case 5:case"end":return t.stop()}}),t)}))),e.addRemoveFavorites=function(){var t=Object(p.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target,a=e.props.trackInfo,e.setState({loading:!0}),!r.checked){t.next=10;break}return t.next=6,M(a);case 6:return t.next=8,e.recoverFavorites();case 8:t.next=14;break;case 10:return t.next=12,U(a);case 12:return t.next=14,e.recoverFavorites();case 14:e.setState({loading:!1});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,favoriteSongs:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.recoverFavorites()}},{key:"render",value:function(){var e=this.props.trackInfo,t=e.trackName,n=e.previewUrl,r=e.trackId,a=this.state,c=a.loading,i=a.favoriteSongs;return Object(y.jsxs)("div",{className:"eachTrack",children:[Object(y.jsx)("p",{children:t}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(y.jsx)("code",{children:"audio"})]}),Object(y.jsxs)("label",{htmlFor:r,children:["\u2764\ufe0f",Object(y.jsx)("input",{id:r,"data-testid":"checkbox-music-".concat(r),type:"checkbox",name:r,onClick:this.addRemoveFavorites,checked:i.some((function(e){return e.trackId===r}))})]}),c&&Object(y.jsx)("span",{children:"..."})]})}}]),n}(a.a.Component)),E=D,R=(n(42),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getMusicsFromAlbum=Object(p.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,C(n);case 3:r=t.sent,e.setState({musics:r,albumImg:r[0].artworkUrl100,albumName:r[0].collectionName,artist:r[0].artistName});case 5:case"end":return t.stop()}}),t)}))),e.state={musics:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getMusicsFromAlbum()}},{key:"render",value:function(){var e=this.state,t=e.musics,n=e.albumImg,r=e.albumName,a=e.artist;return Object(y.jsxs)("div",{id:"page-album","data-testid":"page-album",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"albumPageMain",children:[Object(y.jsxs)("section",{id:"albumInfoContainer",children:[Object(y.jsx)("img",{src:n,alt:r}),Object(y.jsx)("h4",{"data-testid":"album-name",children:r}),Object(y.jsx)("p",{"data-testid":"artist-name",children:a})]}),Object(y.jsx)("section",{id:"tracksListContainer",children:t.map((function(e,t){return t>0&&Object(y.jsx)(E,{trackInfo:e},e.trackId)}))})]})]})}}]),n}(a.a.Component)),T=(n(43),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).recoverFavorites=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:n=t.sent,e.setState({favoriteSongs:n});case 4:case"end":return t.stop()}}),t)}))),e.state={favoriteSongs:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.recoverFavorites()}},{key:"componentDidUpdate",value:function(){this.recoverFavorites()}},{key:"render",value:function(){var e=this.state.favoriteSongs;return Object(y.jsxs)("div",{id:"page-favorites","data-testid":"page-favorites",children:[Object(y.jsx)(S,{}),Object(y.jsx)("main",{id:"favoritesPageMain",children:e.map((function(e){return Object(y.jsxs)("div",{className:"eachFavTrack",children:[Object(y.jsx)("img",{src:e.artworkUrl60,alt:e.collectionName}),Object(y.jsx)("span",{id:"artistNameFav",children:e.artistName}),Object(y.jsx)(E,{trackInfo:e},e.trackId)]},e.trackId)}))})]})}}]),n}(a.a.Component)),J=n(15),B=(n(44),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)("footer",{children:Object(y.jsxs)("span",{children:["Developed by ",Object(y.jsx)("a",{href:"https://github.com/joaofelipelliccione",rel:"noopener noreferrer",target:"_blank",children:"Jo\xe3o Felipe Pelliccione"})]})})}}]),n}(a.a.Component)),W=B,K=n.p+"static/media/trybetunesLogo.86bba9a0.png",L=(n(45),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,r=n.name,a="checkbox"===n.type?n.checked:n.value;e.setState(Object(J.a)({},r,a))},e.onRegisterClick=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.username,e.setState({loading:!0}),t.next=4,g({name:n});case 4:e.setState({loading:!1,redirectToSearch:!0});case 5:case"end":return t.stop()}}),t)}))),e.registerWithEnter=function(t){t.preventDefault(),e.onRegisterClick()},e.state={username:"",loading:!1,redirectToSearch:!1},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.loading,a=t.redirectToSearch;return r?Object(y.jsx)("span",{id:"enteringMessage",children:"Entrando..."}):a?Object(y.jsx)(j.a,{to:"/trybe_frontend_4-trybetunes/search"}):Object(y.jsxs)("div",{children:[Object(y.jsxs)("main",{"data-testid":"page-login",children:[Object(y.jsx)("img",{src:K,alt:"trybetunes-logo"}),Object(y.jsxs)("form",{children:[Object(y.jsx)("label",{htmlFor:"login-name-input",children:Object(y.jsx)("input",{id:"login-name-input","data-testid":"login-name-input",type:"text",name:"username",value:n,onChange:this.onInputChange,onKeyPress:function(t){return"Enter"===t.key&&e.registerWithEnter(t)},placeholder:"Nome"})}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{id:"login-button","data-testid":"login-submit-button",type:"button",disabled:n.length<3,onClick:this.onRegisterClick,children:"Entrar"})]})]}),Object(y.jsx)(W,{})]})}}]),n}(a.a.Component)),q=n.p+"static/media/ilustracaoProfile.002dfa45.svg",G=(n(46),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getUserInfo=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,x();case 3:n=t.sent,e.setState({loading:!1,userInfo:n});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,userInfo:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.userInfo.name;return Object(y.jsxs)("div",{id:"profilePage","data-testid":"page-profile",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"profilePageMain",children:[!t&&Object(y.jsx)("h3",{id:"profilePageMsg",children:"".concat(n,", tudo certo com sua conta! Aproveite o Trybe Tunes!")}),!t&&Object(y.jsx)("img",{src:q,alt:"Ilustra\xe7\xe3o SVG",id:"profilePageIllust"})]})]})}}]),n}(a.a.Component)),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(y.jsx)(S,{}),"P\xe1gina de Edi\xe7\xe3o de Perfil."]})}}]),n}(a.a.Component),z=V,H=n.p+"static/media/notFoundMsg.526ef7b2.png",Q=(n(47),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{id:"notFoundPage","data-testid":"page-not-found",children:[Object(y.jsx)(S,{}),Object(y.jsx)("img",{id:"notFoundImg",src:H,alt:"P\xe1gina n\xe3o encontrada."})]})}}]),n}(a.a.Component)),X=Q,Y=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),r="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(r,{mode:"cors",method:"post",headers:{"access-control-allow-origin":"http://localhost:3000"}});case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Y,$=(n(48),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,r=n.name,a="checkbox"===n.type?n.checked:n.value;e.setState(Object(J.a)({},r,a))},e.onSearchClick=Object(p.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.userSearch,e.setState({loading:!0,lastSearchedArtist:n,userSearch:""}),t.next=4,Z(n);case 4:r=t.sent,e.setState({albuns:r,loading:!1});case 6:case"end":return t.stop()}}),t)}))),e.searchWithEnter=function(t){t.preventDefault(),e.onSearchClick()},e.displaySearchBar=function(){var t=e.state.userSearch;return Object(y.jsxs)("form",{id:"searchArtistForm",children:[Object(y.jsx)("input",{id:"searchBar","data-testid":"search-artist-input",type:"text",name:"userSearch",value:t,onChange:e.onInputChange,onKeyPress:function(t){return"Enter"===t.key&&e.searchWithEnter(t)},placeholder:"Nome do Artista ou do \xc1lbum"}),Object(y.jsx)("button",{id:"search-button","data-testid":"search-artist-button",type:"button",disabled:t.length<2,onClick:e.onSearchClick,children:"\ud83d\udd0e"})]})},e.displayAlbuns=function(){var t=e.state,n=t.lastSearchedArtist,r=t.albuns;return Object(y.jsxs)("div",{id:"apiResultContainer2",children:[Object(y.jsx)("h3",{children:"Retorno da pesquisa por: ".concat(n)}),Object(y.jsx)("div",{id:"albunsContainer",children:r.map((function(e){var t=e.collectionId,n=e.artworkUrl100,r=e.collectionName,a=e.artistName;return Object(y.jsxs)("div",{id:"eachAlbum",children:[Object(y.jsx)("img",{src:n,alt:r}),Object(y.jsx)("p",{children:r}),Object(y.jsx)("p",{children:a}),Object(y.jsx)(b.b,{to:"/trybe_frontend_4-trybetunes/album/".concat(t),"data-testid":"link-to-album-".concat(t),children:Object(y.jsx)("span",{children:"Abrir \xc1lbum"})})]},t)}))})]})},e.displayWarning=function(){return Object(y.jsx)("section",{id:"apiResultContainer2",children:Object(y.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado at\xe9 agora..."})})},e.state={loading:!1,userSearch:"",lastSearchedArtist:"",albuns:[]},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.albuns;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"searchPageMain",children:[Object(y.jsx)("section",{id:"searchBarContainer",children:t?Object(y.jsx)("span",{children:"Carregando..."}):this.displaySearchBar()}),Object(y.jsx)("section",{id:"apiResultContainer",children:n.length>0?this.displayAlbuns():this.displayWarning()})]})]})}}]),n}(a.a.Component)),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)(b.a,{children:Object(y.jsxs)(j.d,{children:[Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/",component:L}),Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/search",component:$}),Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/album/:id",render:function(e){return Object(y.jsx)(R,Object(s.a)({},e))}}),Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/favorites",component:T}),Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/profile",component:G}),Object(y.jsx)(j.b,{exact:!0,path:"/trybe_frontend_4-trybetunes/profile/edit",component:z}),Object(y.jsx)(j.b,{component:X})]})})}}]),n}(a.a.Component),te=ee;i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.085a6da5.chunk.js.map