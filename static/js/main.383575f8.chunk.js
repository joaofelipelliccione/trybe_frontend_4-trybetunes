(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=(n(29),n(16)),o=n(3),u=n(4),l=n(6),d=n(5),j=n(13),b=n(7),h=n(2),p=n.n(h),f=n(8),m="user",O=function(e){return localStorage.setItem(m,JSON.stringify(e))},v=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},g=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(m));null===t&&(t={}),v(t)(e)}))},x=function(e){return new Promise((function(t){O(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),e)),v("OK")(t)}))},k=n.p+"static/media/trybetunesLogoWhite.7907a040.png",y=(n(31),n(0)),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getUserInfo=Object(f.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,g();case 3:n=t.sent,a=n.name,e.setState({loading:!1,username:a});case 6:case"end":return t.stop()}}),t)}))),e.state={loading:!1,username:""},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state.loading;return Object(y.jsxs)("header",{"data-testid":"header-component",children:[Object(y.jsxs)("div",{id:"logoAndUserBar",children:[Object(y.jsx)("img",{src:k,alt:"trybetunes-logo"}),Object(y.jsx)(j.b,{to:"/","data-testid":"header-user-name",children:"Sair"})]}),Object(y.jsxs)("div",{id:"linksBar",children:[Object(y.jsx)(j.b,{to:"/search","data-testid":"link-to-search",children:"Pesquisa"}),Object(y.jsx)(j.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritas"}),Object(y.jsx)(j.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]}),e&&Object(y.jsx)("div",{id:"loadingContainer",children:Object(y.jsx)("span",{children:"Carregando..."})})]})}}]),n}(r.a.Component),I=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"),{mode:"cors",method:"post",headers:{"access-control-allow-origin":"http://localhost:3000"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=I,w=n(24),N="favorite_songs";JSON.parse(localStorage.getItem(N))||localStorage.setItem(N,JSON.stringify([]));var P=function(){return JSON.parse(localStorage.getItem(N))},F=function(e){return localStorage.setItem(N,JSON.stringify(e))},A=function(e){return function(t){setTimeout((function(){t(e)}),500)}},M=function(){return new Promise((function(e){var t=P();A(t)(e)}))},U=function(e){return new Promise((function(t){if(e){var n=P();F([].concat(Object(w.a)(n),[e]))}A("OK")(t)}))},D=function(e){return new Promise((function(t){var n=P();F(n.filter((function(t){return t.trackId!==e.trackId}))),A("OK")(t)}))},E=(n(41),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).recoverFavorites=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,M();case 3:n=t.sent,e.setState({loading:!1,favoriteSongs:n});case 5:case"end":return t.stop()}}),t)}))),e.addRemoveFavorites=function(){var t=Object(f.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,r=e.props.trackInfo,e.setState({loading:!0}),!a.checked){t.next=10;break}return t.next=6,U(r);case 6:return t.next=8,e.recoverFavorites();case 8:t.next=14;break;case 10:return t.next=12,D(r);case 12:return t.next=14,e.recoverFavorites();case 14:e.setState({loading:!1});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,favoriteSongs:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.recoverFavorites()}},{key:"render",value:function(){var e=this.props.trackInfo,t=e.trackName,n=e.previewUrl,a=e.trackId,r=this.state,c=r.loading,i=r.favoriteSongs;return Object(y.jsxs)("div",{className:"eachTrack",children:[Object(y.jsx)("p",{children:t}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(y.jsx)("code",{children:"audio"})]}),Object(y.jsxs)("label",{htmlFor:a,children:["\u2764\ufe0f",Object(y.jsx)("input",{id:a,"data-testid":"checkbox-music-".concat(a),type:"checkbox",name:a,onClick:this.addRemoveFavorites,checked:i.some((function(e){return e.trackId===a}))})]}),c&&Object(y.jsx)("span",{children:"..."})]})}}]),n}(r.a.Component)),R=E,T=(n(42),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getMusicsFromAlbum=Object(f.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,C(n);case 3:a=t.sent,e.setState({musics:a,albumImg:a[0].artworkUrl100,albumName:a[0].collectionName,artist:a[0].artistName});case 5:case"end":return t.stop()}}),t)}))),e.state={musics:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getMusicsFromAlbum()}},{key:"render",value:function(){var e=this.state,t=e.musics,n=e.albumImg,a=e.albumName,r=e.artist;return Object(y.jsxs)("div",{id:"page-album","data-testid":"page-album",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"albumPageMain",children:[Object(y.jsxs)("section",{id:"albumInfoContainer",children:[Object(y.jsx)("img",{src:n,alt:a}),Object(y.jsx)("h4",{"data-testid":"album-name",children:a}),Object(y.jsx)("p",{"data-testid":"artist-name",children:r})]}),Object(y.jsx)("section",{id:"tracksListContainer",children:t.map((function(e,t){return t>0&&Object(y.jsx)(R,{trackInfo:e},e.trackId)}))})]})]})}}]),n}(r.a.Component)),J=(n(43),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).recoverFavorites=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M();case 2:n=t.sent,e.setState({favoriteSongs:n});case 4:case"end":return t.stop()}}),t)}))),e.state={favoriteSongs:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.recoverFavorites()}},{key:"componentDidUpdate",value:function(){this.recoverFavorites()}},{key:"render",value:function(){var e=this.state.favoriteSongs;return Object(y.jsxs)("div",{id:"page-favorites","data-testid":"page-favorites",children:[Object(y.jsx)(S,{}),Object(y.jsx)("main",{id:"favoritesPageMain",children:e.map((function(e){return Object(y.jsxs)("div",{className:"eachFavTrack",children:[Object(y.jsx)("img",{src:e.artworkUrl60,alt:e.collectionName}),Object(y.jsx)("span",{id:"artistNameFav",children:e.artistName}),Object(y.jsx)(R,{trackInfo:e},e.trackId)]},e.trackId)}))})]})}}]),n}(r.a.Component)),B=n(15),W=(n(44),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)("footer",{children:Object(y.jsxs)("span",{children:["Developed by ",Object(y.jsx)("a",{href:"https://github.com/joaofelipelliccione",rel:"noopener noreferrer",target:"_blank",children:"Jo\xe3o Felipe Pelliccione"})]})})}}]),n}(r.a.Component)),K=W,L=n.p+"static/media/trybetunesLogo.86bba9a0.png",q=(n(45),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,a=n.name,r="checkbox"===n.type?n.checked:n.value;e.setState(Object(B.a)({},a,r))},e.onRegisterClick=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.username,e.setState({loading:!0}),t.next=4,x({name:n});case 4:e.setState({loading:!1,redirectToSearch:!0});case 5:case"end":return t.stop()}}),t)}))),e.registerWithEnter=function(t){t.preventDefault(),e.onRegisterClick()},e.state={username:"",loading:!1,redirectToSearch:!1},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.loading,r=t.redirectToSearch;return a?Object(y.jsx)("span",{id:"enteringMessage",children:"Entrando..."}):r?Object(y.jsx)(b.a,{to:"/search"}):Object(y.jsxs)("div",{children:[Object(y.jsxs)("main",{"data-testid":"page-login",children:[Object(y.jsx)("img",{src:L,alt:"trybetunes-logo"}),Object(y.jsxs)("form",{children:[Object(y.jsx)("label",{htmlFor:"login-name-input",children:Object(y.jsx)("input",{id:"login-name-input","data-testid":"login-name-input",type:"text",name:"username",value:n,onChange:this.onInputChange,onKeyPress:function(t){return"Enter"===t.key&&e.registerWithEnter(t)},placeholder:"Nome"})}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{id:"login-button","data-testid":"login-submit-button",type:"button",disabled:n.length<3,onClick:this.onRegisterClick,children:"Entrar"})]})]}),Object(y.jsx)(K,{})]})}}]),n}(r.a.Component)),_=n.p+"static/media/ilustracaoProfile.002dfa45.svg",G=(n(46),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getUserInfo=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,g();case 3:n=t.sent,e.setState({loading:!1,userInfo:n});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,userInfo:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.userInfo.name;return Object(y.jsxs)("div",{id:"profilePage","data-testid":"page-profile",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"profilePageMain",children:[!t&&Object(y.jsx)("h3",{id:"profilePageMsg",children:"".concat(n,", tudo certo com sua conta! Aproveite o Trybe Tunes!")}),!t&&Object(y.jsx)("img",{src:_,alt:"Ilustra\xe7\xe3o SVG",id:"profilePageIllust"})]})]})}}]),n}(r.a.Component)),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(y.jsx)(S,{}),"P\xe1gina de Edi\xe7\xe3o de Perfil."]})}}]),n}(r.a.Component),z=V,H=n.p+"static/media/notFoundMsg.526ef7b2.png",Q=(n(47),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{id:"notFoundPage","data-testid":"page-not-found",children:[Object(y.jsx)(S,{}),Object(y.jsx)("img",{id:"notFoundImg",src:H,alt:"P\xe1gina n\xe3o encontrada."})]})}}]),n}(r.a.Component)),X=Q,Y=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,c,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a,{mode:"cors",method:"post",headers:{"access-control-allow-origin":"http://localhost:3000"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Y,$=(n(48),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,a=n.name,r="checkbox"===n.type?n.checked:n.value;e.setState(Object(B.a)({},a,r))},e.onSearchClick=Object(f.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.userSearch,e.setState({loading:!0,lastSearchedArtist:n,userSearch:""}),t.next=4,Z(n);case 4:a=t.sent,e.setState({albuns:a,loading:!1});case 6:case"end":return t.stop()}}),t)}))),e.searchWithEnter=function(t){t.preventDefault(),e.onSearchClick()},e.displaySearchBar=function(){var t=e.state.userSearch;return Object(y.jsxs)("form",{id:"searchArtistForm",children:[Object(y.jsx)("input",{id:"searchBar","data-testid":"search-artist-input",type:"text",name:"userSearch",value:t,onChange:e.onInputChange,onKeyPress:function(t){return"Enter"===t.key&&e.searchWithEnter(t)},placeholder:"Nome do Artista ou do \xc1lbum"}),Object(y.jsx)("button",{id:"search-button","data-testid":"search-artist-button",type:"button",disabled:t.length<2,onClick:e.onSearchClick,children:"\ud83d\udd0e"})]})},e.displayAlbuns=function(){var t=e.state,n=t.lastSearchedArtist,a=t.albuns;return Object(y.jsxs)("div",{id:"apiResultContainer2",children:[Object(y.jsx)("h3",{children:"Retorno da pesquisa por: ".concat(n)}),Object(y.jsx)("div",{id:"albunsContainer",children:a.map((function(e){var t=e.collectionId,n=e.artworkUrl100,a=e.collectionName,r=e.artistName;return Object(y.jsxs)("div",{id:"eachAlbum",children:[Object(y.jsx)("img",{src:n,alt:a}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("p",{children:r}),Object(y.jsx)(j.b,{to:"/album/".concat(t),"data-testid":"link-to-album-".concat(t),children:Object(y.jsx)("span",{children:"Abrir \xc1lbum"})})]},t)}))})]})},e.displayWarning=function(){return Object(y.jsx)("section",{id:"apiResultContainer2",children:Object(y.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado at\xe9 agora..."})})},e.state={loading:!1,userSearch:"",lastSearchedArtist:"",albuns:[]},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.albuns;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("main",{id:"searchPageMain",children:[Object(y.jsx)("section",{id:"searchBarContainer",children:t?Object(y.jsx)("span",{children:"Carregando..."}):this.displaySearchBar()}),Object(y.jsx)("section",{id:"apiResultContainer",children:n.length>0?this.displayAlbuns():this.displayWarning()})]})]})}}]),n}(r.a.Component)),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)(j.a,{children:Object(y.jsxs)(b.d,{children:[Object(y.jsx)(b.b,{exact:!0,path:"/",component:q}),Object(y.jsx)(b.b,{path:"/search",component:$}),Object(y.jsx)(b.b,{path:"/album/:id",render:function(e){return Object(y.jsx)(T,Object(s.a)({},e))}}),Object(y.jsx)(b.b,{path:"/favorites",component:J}),Object(y.jsx)(b.b,{exact:!0,path:"/profile",component:G}),Object(y.jsx)(b.b,{path:"/profile/edit",component:z}),Object(y.jsx)(b.b,{component:X})]})})}}]),n}(r.a.Component),te=ee;i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.383575f8.chunk.js.map